# face verification with the VGGFace2 model
import base64
import io
import time
from datetime import datetime as dt
import cv2
from PIL import Image
import numpy as np
from scipy.spatial.distance import cosine

from keras_vggface.vggface import VGGFace
from keras_vggface.utils import preprocess_input


def get_embedding(faces):
    samples = np.asarray(faces, 'float32')
    # prepare the face for the model, e.g. center pixels
    samples = preprocess_input(samples, version=2)
    # create a vggface model
    model = VGGFace(model='resnet50', include_top=False, input_shape=(224, 224, 3), pooling='avg')
    # perform prediction
    yhat = model.predict(samples)
    return yhat[0]


# determine if a candidate face is a match for a known face
def is_match(known_embedding, candidate_embedding, thresh=0.5):
    # calculate distance between embeddings
    score = cosine(known_embedding, candidate_embedding)
    if score <= thresh:
        print('>face is a Match (%.3f <= %.3f)' % (score, thresh))
    else:
        print('>face is NOT a Match (%.3f > %.3f)' % (score, thresh))

# define filenames

# get embeddings file filenames
# img1 = cv2.imread('IMG_2.jpeg')
# ret, ext = cv2.imencode('.jpeg', img1)
# im = ext.tobytes()
#
# print(str(base64.b64encode(im).decode('utf-8')))

img2 = cv2.imread('test.jpg')
base64_image = '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'
file_like = io.BytesIO(base64.b64decode(base64_image))
image_input = Image.open(file_like)


frame = np.array(image_input)
frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)

# img1 = cv2.resize(img1, (224, 224))
img2 = cv2.resize(img2, (224, 224))
frame = cv2.resize(frame, (224, 224))
cv2.imshow("x", frame)
cv2.waitKey(0)
#
#
# # print(type(img2))
#
files = []
files.append(frame)
files.append(img2)

embeddings = get_embedding(files)
start_time = time.time()
is_match(embeddings[0], embeddings[1])
print(time.time() - start_time)
print(dt.now().year)
# # define sharon stone
# sharon_id = embeddings[0]
# # verify known photos of sharon
# print('Positive Tests')
# is_match(embeddings[0], embeddings[1])
# # is_match(embeddings[0], embeddings[2])
# # verify known photos of other people
#
# is_match(embeddings[0], embeddings[2])
